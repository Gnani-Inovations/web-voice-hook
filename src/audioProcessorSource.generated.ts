/** Generated by scripts/embed-worklet.mjs - do not edit */
export const audioProcessorSource = "/**\n * Audio Worklet: captures mic input and posts 400ms chunks to the main thread.\n * Must be served from a path reachable by the app (e.g. public/worklet/audio-processor.js).\n * Main thread sends base64 Âµ-law over WebSocket (see useWebVoice.ts).\n */\nclass AudioProcessor extends AudioWorkletProcessor {\n  constructor(options) {\n    super();\n    const { sampleRate = 44100 } = options.processorOptions ?? {};\n    this.bufferSize = Math.floor((sampleRate * 400) / 1000);\n    this.buffer = new Float32Array(this.bufferSize);\n    this.bufferIndex = 0;\n  }\n\n  process(inputs) {\n    const input = inputs[0];\n    if (!input || !input[0]) return true;\n\n    const samples = input[0];\n\n    // Fill the buffer with new samples\n    for (let i = 0; i < samples.length; i++) {\n      this.buffer[this.bufferIndex] = samples[i];\n      this.bufferIndex++;\n\n      // When buffer is full (200ms of audio), send it\n      if (this.bufferIndex >= this.bufferSize) {\n        // Send the filled buffer\n        this.port.postMessage({\n          type: 'audio-data',\n          data: this.buffer.slice(),\n          timestamp: currentTime,\n        });\n\n        // Reset buffer index to start filling again\n        this.bufferIndex = 0;\n      }\n    }\n\n    return true;\n  }\n}\n\nregisterProcessor('audio-processor', AudioProcessor);\n";
